!function($){"use strict";var e=$(".magic8 input, input.magic8");e.each(function(){function e(){r.each(function(){var e=$(this).text().toLowerCase(),s=a.val().toLowerCase();0===e.indexOf(s)?$(this).addClass("show"):$(this).removeClass("show")})}var a=$(this),s=a.parent(),o=s.find("ul.magic8"),r=o.find("li"),t=a.parents(".magic8"),n=t.attr("id");t.removeClass("magic8"),s.addClass("magic8"),a.hasClass("magic8")||a.addClass("magic8"),a.attr("autocomplete","off"),a.on("focus click",function(){s.addClass("open"),o[0]?e():(s.append('<ul class="magic8"></ul>'),o=s.find("ul.magic8"),o.append('<li class="show">Searching...</li>'),$.ajax({url:magic8_ajax_vars.url,type:"POST",dataType:"json",data:{action:"magic8",nonce:magic8_ajax_vars.nonce,name:n},beforeSend:function(e){o.append('<li class="Searching">Searching...</li>')},success:function(e){e.success&&(o.empty(),o.append(e.data.html))},complete:function(o,t){r=s.find("ul.magic8 li"),r.hover(function(){r.removeClass("hovered"),$(this).addClass("hovered")},function(){}),r.click("click",function(){a.val($(this).text()),s.removeClass("open"),r.removeClass("hovered")}),e()}}))}),a.focusout(function(){$(r.selector+":hover")[0]||(s.removeClass("open"),r.removeClass("hovered"))}),a.on("change keyup paste",function(a){13!==a.keyCode&&(s.hasClass("open")||s.addClass("open"),e())}),$(document).keydown(function(e){s.hasClass("open")&&(13===e.keyCode?(r.hasClass("hovered")&&a.val(r.filter(".hovered").text()),s.removeClass("open"),r.removeClass("hovered"),e.preventDefault()):38===e.keyCode?(r.hasClass("hovered")&&r.filter(".hovered").prev(".show")[0]?r.filter(".hovered").removeClass("hovered").prev(".show").addClass("hovered"):(r.filter(".hovered").removeClass("hovered"),r.filter(".show").last().addClass("hovered")),e.preventDefault()):40===e.keyCode&&(r.hasClass("hovered")&&r.filter(".hovered").next(".show")[0]?r.filter(".hovered").removeClass("hovered").next(".show").addClass("hovered"):(r.filter(".hovered").removeClass("hovered"),r.filter(".show").first().addClass("hovered")),e.preventDefault()))})})}(jQuery);